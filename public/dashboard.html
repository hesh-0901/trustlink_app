<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport"
content="width=device-width, initial-scale=1.0, viewport-fit=cover" />

<title>Dashboard - TrustLink</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        primary: "#1E2BE0",
        primaryStrong: "#0F1ACD",
        primaryLight: "#3D4BFF",
        background: "#EEF2FF"
      }
    }
  }
}
</script>

<script type="module" src="/trustlink_app/js/firebase-init.js"></script>
<script type="module" src="../public/js/dashboard.js"></script>

<style>
body {
  background: #EEF2FF;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

.swipe-container {
  display: flex;
  gap: 16px;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  -webkit-overflow-scrolling: touch;
}

.swipe-container::-webkit-scrollbar {
  display: none;
}

.swipe-item {
  min-width: 100%;
  scroll-snap-align: center;
}

.wallet-card {
  border-radius: 28px;
  padding: 24px;
  position: relative;
  overflow: hidden;
  color: white;
  box-shadow: 0 30px 70px rgba(0,0,0,0.18);
}

.gradient-wallet {
  background: linear-gradient(
    135deg,
    #0F1ACD 0%,
    #1E2BE0 40%,
    #3D4BFF 100%
  );
}
</style>

</head>

<body class="min-h-screen">

<!-- HEADER FIXE -->
<div id="header-container"
     class="fixed top-0 left-0 w-full z-50"></div>

<!-- CONTENU -->
<div class="max-w-md mx-auto px-6 pt-28 pb-36">

  <!-- SWIPE WALLETS -->
  <div class="swipe-container mb-10">

    <div class="swipe-item">
      <div class="wallet-card gradient-wallet">

        <div class="flex justify-between items-center mb-6">
          <img src="/trustlink_app/assets/white.logo.png"
               class="h-6">
          <span class="text-sm opacity-80 font-semibold">
            USD
          </span>
        </div>

        <p class="text-sm opacity-80 mb-2">
          Solde disponible
        </p>

        <h2 id="balanceUSD"
            class="text-3xl font-bold tracking-tight mb-6">
          $0
        </h2>

      </div>
    </div>

    <div class="swipe-item">
      <div class="wallet-card gradient-wallet opacity-95">

        <div class="flex justify-between items-center mb-6">
          <img src="/trustlink_app/assets/white.logo.png"
               class="h-6">
          <span class="text-sm opacity-80 font-semibold">
            CDF
          </span>
        </div>

        <p class="text-sm opacity-80 mb-2">
          Solde disponible
        </p>

        <h2 id="balanceCDF"
            class="text-3xl font-bold tracking-tight mb-6">
          0 CDF
        </h2>

      </div>
    </div>

  </div>

  <!-- ===============================
       ACTIONS RAPIDES
  =============================== -->

  <div class="mb-10">

    <div class="flex justify-between items-center mb-4">
      <h3 class="text-base font-semibold">
        Actions rapides
      </h3>
      <button id="toggleActions"
              class="text-lg font-bold text-primaryStrong">
        ...
      </button>
    </div>

    <!-- LIGNE PRINCIPALE -->
    <div class="grid grid-cols-3 gap-4">

      <a href="./actions/transferer.html"
         class="bg-white rounded-2xl p-4 flex flex-col items-center gap-2 shadow active:scale-95 transition">
        <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center">
          <i class="bi bi-arrow-left-right text-primaryStrong text-xl"></i>
        </div>
        <span class="text-xs font-medium text-gray-700">
          Transférer
        </span>
      </a>

      <a href="./actions/recevoir.html"
         class="bg-white rounded-2xl p-4 flex flex-col items-center gap-2 shadow active:scale-95 transition">
        <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center">
          <i class="bi bi-qr-code text-primaryStrong text-xl"></i>
        </div>
        <span class="text-xs font-medium text-gray-700">
          Recevoir
        </span>
      </a>

      <a href="./actions/deposer.html"
         class="bg-white rounded-2xl p-4 flex flex-col items-center gap-2 shadow active:scale-95 transition">
        <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center">
          <i class="bi bi-plus-circle text-primaryStrong text-xl"></i>
        </div>
        <span class="text-xs font-medium text-gray-700">
          Déposer
        </span>
      </a>

    </div>

    <!-- LIGNE SECONDAIRE (CACHÉE) -->
    <div id="extraActions"
         class="grid grid-cols-3 gap-4 mt-4 hidden">

      <a href="./actions/approbation.html"
         class="bg-white rounded-2xl p-4 flex flex-col items-center gap-2 shadow active:scale-95 transition">
        <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center">
          <i class="bi bi-check2-circle text-primaryStrong text-xl"></i>
        </div>
        <span class="text-xs font-medium text-gray-700">
          Approbation
        </span>
      </a>

      <a href="./actions/gestion-dettes.html"
         class="bg-white rounded-2xl p-4 flex flex-col items-center gap-2 shadow active:scale-95 transition">
        <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center">
          <i class="bi bi-journal-text text-primaryStrong text-xl"></i>
        </div>
        <span class="text-xs font-medium text-gray-700">
          Dettes
        </span>
      </a>

      <a href="./actions/previsions.html"
         class="bg-white rounded-2xl p-4 flex flex-col items-center gap-2 shadow active:scale-95 transition">
        <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center">
          <i class="bi bi-graph-up text-primaryStrong text-xl"></i>
        </div>
        <span class="text-xs font-medium text-gray-700">
          Prévisions
        </span>
      </a>

      <a href="./actions/sorties.html"
         class="bg-white rounded-2xl p-4 flex flex-col items-center gap-2 shadow active:scale-95 transition">
        <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center">
          <i class="bi bi-wallet2 text-primaryStrong text-xl"></i>
        </div>
        <span class="text-xs font-medium text-gray-700">
          Sorties
        </span>
      </a>

      <a href="./actions/historique.html"
         class="bg-white rounded-2xl p-4 flex flex-col items-center gap-2 shadow active:scale-95 transition">
        <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center">
          <i class="bi bi-clock-history text-primaryStrong text-xl"></i>
        </div>
        <span class="text-xs font-medium text-gray-700">
          Historique
        </span>
      </a>

      <a href="./actions/beneficiaires.html"
         class="bg-white rounded-2xl p-4 flex flex-col items-center gap-2 shadow active:scale-95 transition">
        <div class="w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center">
          <i class="bi bi-person-lines-fill text-primaryStrong text-xl"></i>
        </div>
        <span class="text-xs font-medium text-gray-700">
          Bénéficiaires
        </span>
      </a>

    </div>

  </div>

  <!-- ===============================
       NOTIFICATIONS
  =============================== -->

  <div>

    <div class="flex justify-between items-center mb-4">
      <h3 class="text-base font-semibold">
        Notifications
      </h3>
    </div>

    <div id="transactionsList"
         class="space-y-3">
    </div>

  </div>

</div>

<!-- NAVBAR FIXE -->
<div id="navbar-container"
     class="fixed bottom-0 left-0 w-full z-50"></div>

<script>
document.getElementById("toggleActions")
  .addEventListener("click", () => {
    document.getElementById("extraActions")
      .classList.toggle("hidden");
});
</script>

<script type="module">
async function loadNavbar() {
  const res = await fetch("/trustlink_app/partials/nav.html");
  const data = await res.text();
  document.getElementById("navbar-container").innerHTML = data;
}
loadNavbar();
</script>

<script type="module">
async function loadHeader() {
  const res = await fetch("../partials/header.html");
  const html = await res.text();
  document.getElementById("header-container").innerHTML = html;
  await import("../main_js/header.js");
}
loadHeader();
</script>

</body>
</html>
